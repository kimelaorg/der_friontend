<!-- NAVIGATION BAR (STICKY) -->
<nav class="navbar" [class.menu-open]="isMobileMenuOpen()">
  <div class="">
    <!-- Main Header Row -->
    <div class="nav-header">
      <!-- 1. LEFT GROUP: Mobile Menu Button & Brand Logo -->
      <div class="nav-left">
        <button (click)="toggleMenu()" type="button" aria-controls="mobile-menu"
                [attr.aria-expanded]="isMobileMenuOpen()" class="menu-toggle">
          @if (!isMobileMenuOpen()) {
            <svg class="icon-24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
            </svg>
          } @else {
            <svg class="icon-24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          }
        </button>
        <a href="/" class="brand-logo">Daz Electronics</a>
      </div>

      <!-- 2. CENTER GROUP: Search Input (Flexible width on mobile, fixed width on desktop) -->
      <div class="search-container">
        <div class="search-wrapper">
          <app-search />
          <!-- <input type="search" placeholder="Search for products..." class="search-input">
          <svg class="search-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg> -->
        </div>
      </div>

      <!-- <div class="searchBox">
        <app-search />
      </div> -->

      <!-- 3. RIGHT GROUP: Desktop Links & Mobile/Desktop Actions -->
      <div class="nav-right">
        <!-- Desktop Navigation Links -->
        <div class="desktop-links">
          @for (nav of mainNavLinks; track nav.label) {
            <a [routerLink]="nav.link" routerLinkActive="active-item" class="nav-link" [class.deal-link]="nav.label === 'Deals'">
              {{ nav.label }}
            </a>
          }
        </div>

        <!-- Action Icons (Sign In & Cart) -->
        <a [routerLink]="'/der/account/login'" title="Sign in" class="action-icon">
          <svg class="icon-24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
          <span class="sr-only">Sign in</span>
        </a>
        <a href="/cart" title="Cart" class="action-icon cart-icon-wrapper">
          <svg class="icon-24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
          <span class="sr-only">Cart</span>
          <span class="cart-badge">3</span>
        </a>
      </div>
    </div>

    <!-- Mobile Menu Drawer -->
    @if (isMobileMenuOpen()) {
      <div id="mobile-menu" class="mobile-menu-drawer">
        <div class="mobile-links-container">
          @for (nav of mobileNavLinks; track nav.label) {
            <a [href]="nav.link" class="mobile-nav-link" [class.deal-link]="nav.label === 'Deals'">
              {{ nav.label }}
            </a>
          }
        </div>
      </div>
    }
  </div>
</nav>

<!-- MAIN CONTENT -->
<main class="main-content">

  <!-- 1. HERO SLIDESHOW SECTION -->
  <section class="slideshow-section">
    <div class="slideshow-container">
      @for (slide of slides(); track $index) {
        <div class="slide-item" [class]="slide.imgClass" [class.active]="currentSlide() === $index">
          <div class="slide-content">
            <h2 class="slide-subtitle">{{ slide.subtitle }}</h2>
            <h1 class="slide-title">{{ slide.title }}</h1>
            <a [href]="slide.link" class="slide-cta-button">{{ slide.cta }}</a>
          </div>
        </div>
      }

      <!-- Slider Controls -->
      <button (click)="prevSlide()" class="slide-control prev-control" aria-label="Previous Slide">
        <svg class="icon-24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
      </button>
      <button (click)="nextSlide()" class="slide-control next-control" aria-label="Next Slide">
        <svg class="icon-24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
      </button>

      <!-- Slide Indicators -->
      <div class="slide-indicators">
        @for (slide of slides(); track $index) {
          <button (click)="setCurrentSlide($index)" [class.active]="currentSlide() === $index"
                  class="indicator-dot" [attr.aria-label]="'Go to slide ' + ($index + 1)"></button>
        }
      </div>
    </div>
  </section>

  <!-- 3. BEST SELLERS / FEATURED PRODUCTS -->
  <section class="section-container">
    <h2 class="section-title">Pick Your Favorite Product</h2>
    <div class="product-list">

      @for (product of products; track product.id) {

        @if (product.product_specs.length > 0) {

          @let spec = product.product_specs[0];

          <a [href]="'/der/product/' + product.id" class="product-card">

            <img [src]="spec.images.length > 0 ? spec.images[0].image : ''"
                 [alt]="product.name"
                 class="product-image"
                 onerror="this.onerror=null;this.src='https://placehold.co/400x300/a5b4fc/4338ca?text=Product';" />

            <div class="product-info">

              <h3 class="product-name">{{ product.name }}</h3>

              <p class="product-price">{{ spec.sale_price }}</p>

              <button class="add-to-cart-button">Add to Cart</button>
            </div>
          </a>
        }
      }
    </div>
  </section>

</main>


<!-- FOOTER -->
<footer class="main-footer">
  <div class="footer-container">
    <div class="footer-col">
      <h4 class="brand-logo footer-logo">Daz Electronics</h4>
      <p>Quality electronics, guaranteed.</p>
      <div class="social-links">
         <a href="#" title="Facebook" class="social-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path></svg>
         </a>

         <a href="#" title="Twitter" class="social-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5 0-.58-.02-1.16-.07-1.74a10.05 10.05 0 003-3.8z"></path></svg>
         </a>

         <a href="#" title="Instagram" class="social-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
         </a>

         <a href="https://wa.me/yourphonenumber" title="WhatsApp" class="social-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.84 2.87a1.05 1.05 0 011.6 0l.73 1.15c.67 1.06 1.1 2.37 1.1 3.73v.75a7 7 0 11-7-7h.75c1.36 0 2.67.43 3.73 1.1z"></path><path d="M10.74 2.87a1.05 1.05 0 00-1.6 0l-.73 1.15c-.67 1.06-1.1 2.37-1.1 3.73v.75a7 7 0 107-7h-.75c-1.36 0-2.67.43-3.73 1.1z"></path><path d="M19.07 4.93a12 12 0 100 14.14 12 12 0 000-14.14zM12 22a10 10 0 110-20 10 10 0 010 20z"></path><path d="M15 13.5c-.24-.12-.47-.24-.71-.35-.71-.35-1.42-.71-2.13-1.06-.71-.35-1.42-.71-2.13-1.06-.95-.47-1.42-1.42-1.42-2.37V9.5c0-.95.71-1.42 1.42-1.42h.71c.24 0 .47.04.71.12.71.12 1.42.24 2.13.35.71.12 1.42.24 2.13.35.95.12 1.42.59 1.42 1.54V12c0 .95-.71 1.42-1.42 1.42h-.71z"></path></svg>
         </a>

         <a href="#" title="TikTok" class="social-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 3H8a5 5 0 00-5 5v8a5 5 0 005 5h8a5 5 0 005-5V8a5 5 0 00-5-5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8a1 1 0 110 2 1 1 0 010-2z"></path><path d="M17.5 6.5h.01"></path><path d="M17.5 17.5h.01"></path><path d="M6.5 6.5h.01"></path><path d="M6.5 17.5h.01"></path></svg>
         </a>
      </div>
    </div>
    <div class="footer-col">
      <h4>Company</h4>
      <ul>
        <li><a href="/about">About Us</a></li>
        <li><a href="/careers">Careers</a></li>
        <li><a href="/press">Press</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Support</h4>
      <ul>
        <li><a href="/contact">Contact Us</a></li>
        <li><a href="/faq">FAQ</a></li>
        <li><a href="/returns">Returns</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Legal</h4>
      <ul>
        <li><a href="/privacy">Privacy Policy</a></li>
        <li><a href="/terms">Terms of Service</a></li>
      </ul>
    </div>
  </div>
  <div class="copyright">
    &copy; {{ currentYear }} Daz Electronics. All rights reserved.
  </div>
</footer>
